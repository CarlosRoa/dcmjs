{"version":3,"sources":["webpack://dcmjs/./adapters/Cornerstone/Segmentation.js"],"names":["Segmentation","stackOfImages","toolState","dataset","cornerstoneTools","globalImageIdSpecificToolStateManager","i","imageIds","length","imageId","byteOffset","width","height","slicePixelData","Uint8ClampedArray","buffer","toolData","segmentationIndex","pixelData","invalidated","saveImageIdToolState","toolType","data","restoreImageIdToolState"],"mappings":";;;;;;;;;;;;;;;;;;;;IAAqBA,Y;AACnB,0BAAc;AAAA;AAAE;;;;sCAESC,a,EAAeC,S,EAAW,CAAE;;;kCAEhCC,O,EAAS;AAC5B;AACA;;;;;;AAF4B,8BAQsBC,gBARtB;AAAA,UAQpBC,qCARoB,qBAQpBA,qCARoB;;;AAU5B,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIC,SAASC,MAA7B,EAAqCF,GAArC,EAA0C;AACxC,YAAMG,UAAUF,SAASD,CAAT,CAAhB;AACA,YAAMI,aAAaC,QAAQC,MAAR,GAAiBN,CAApC;AACA,YAAME,SAASG,QAAQC,MAAvB;AACA,YAAMC,iBAAiB,IAAIC,iBAAJ,CAAsBC,MAAtB,EAA8BL,UAA9B,EAA0CF,MAA1C,CAAvB;;AAEA,YAAMQ,WAAW,EAAjB;AACAA,iBAASC,iBAAT,IAA8B;AAC5BC,qBAAWL,cADiB;AAE5BM,uBAAa;AAFe,SAA9B;;AAKA,YAAMjB,YACJG,sCAAsCe,oBAAtC,CAA2DX,OAA3D,KACA,EAFF;;AAIAP,kBAAUmB,QAAV,IAAsB;AACpBC,gBAAMN;AADc,SAAtB;;AAIAX,8CAAsCkB,uBAAtC,CACEd,OADF,EAEEP,SAFF;AAID;AACF;;;;;;kBAxCkBF,Y","file":"dcmjs.fbb8de44d3c66241dada.hot-update.js","sourcesContent":["export default class Segmentation {\n  constructor() {}\n\n  static generateToolState(stackOfImages, toolState) {}\n\n  static readToolState(dataset) {\n    // TODO: Check if the dataset is a seg.\n    /*\n    if (dataset) {\n      throw new Error(\"This package is only meant to \");\n    }\n    */\n\n    const { globalImageIdSpecificToolStateManager } = cornerstoneTools;\n\n    for (let i = 0; i < imageIds.length; i++) {\n      const imageId = imageIds[i];\n      const byteOffset = width * height * i;\n      const length = width * height;\n      const slicePixelData = new Uint8ClampedArray(buffer, byteOffset, length);\n\n      const toolData = [];\n      toolData[segmentationIndex] = {\n        pixelData: slicePixelData,\n        invalidated: true\n      };\n\n      const toolState =\n        globalImageIdSpecificToolStateManager.saveImageIdToolState(imageId) ||\n        {};\n\n      toolState[toolType] = {\n        data: toolData\n      };\n\n      globalImageIdSpecificToolStateManager.restoreImageIdToolState(\n        imageId,\n        toolState\n      );\n    }\n  }\n}\n"],"sourceRoot":""}